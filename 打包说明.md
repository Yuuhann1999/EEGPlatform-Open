# EEG Platform 手动打包指南

## 前置要求
- Python 3.9+ 已安装
- Node.js 和 npm 已安装
- 已安装项目依赖

---

## 手动打包步骤

### 步骤 1：构建前端

```powershell
# 进入前端目录
cd frontend

# 安装依赖（如果还没安装）
npm install

# 构建前端
npm run build

# 检查构建结果
# 应该看到 frontend/dist/ 目录，包含 index.html 和 assets/ 文件夹
```

### 步骤 2：检查后端依赖

```powershell
# 回到项目根目录
cd ..

# 激活虚拟环境（如果使用）
.\.venv\Scripts\Activate.ps1

# 安装/更新 PyInstaller（如果还没安装）
pip install pyinstaller

# 确保后端依赖已安装
pip install -r backend/requirements.txt
```

### 步骤 3：使用 PyInstaller 打包

```powershell
# 在项目根目录执行
pyinstaller EEGPlatform.spec --noconfirm
```

**参数说明：**
- `EEGPlatform.spec` - PyInstaller 配置文件
- `--noconfirm` - 自动覆盖已存在的构建文件

### 步骤 4：检查输出

打包完成后，检查以下文件：

```
dist/
  └── EEGPlatform.exe  ← 这就是最终的可执行文件
```

---

## 快速打包（使用自动化脚本）

如果不想手动执行，可以直接运行：

```powershell
.\build.ps1
```

这个脚本会自动执行上述所有步骤。

---

## 常见问题

### 1. 前端构建失败
- 检查 `node_modules` 是否存在
- 运行 `npm install` 重新安装依赖
- 检查 Node.js 版本（建议 16+）

### 2. PyInstaller 打包失败
- 确保所有 Python 依赖已安装
- 检查 `EEGPlatform.spec` 文件中的路径是否正确
- 查看错误日志，通常会在控制台输出

### 3. 打包后的 exe 无法运行
- 检查 `frontend/dist` 目录是否存在
- 查看控制台错误信息
- 确保所有 MNE 数据文件已正确打包

### 4. 文件太大
- 这是正常的，因为包含了 MNE-Python 和所有依赖
- 通常最终 exe 文件在 200-500 MB 左右

---

## 打包后的文件结构

```
EEGPlatform.exe  (单个可执行文件，包含所有依赖)
```

**注意：** 这是一个独立的可执行文件，不需要安装 Python 或 Node.js 即可运行。

---

## 测试打包结果

```powershell
# 运行打包好的 exe
.\dist\EEGPlatform.exe

# 应该会自动打开浏览器访问 http://127.0.0.1:8088
```

---

## 清理构建文件

如果需要重新打包，可以清理旧的构建文件：

```powershell
# 删除构建目录
Remove-Item -Recurse -Force build
Remove-Item -Recurse -Force dist

# 删除 spec 文件（可选，会自动重新生成）
# Remove-Item EEGPlatform.spec
```

